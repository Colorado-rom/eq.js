!function(a){"use strict";function b(){this.nodes=[],this.eqsLength=0,this.widths=[],this.points=[]}"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="".__proto__===String.prototype?function(a){return a.__proto__}:function(a){return a.constructor.prototype}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}());for(var c=0,d=["webkit","moz"],e=0;e<d.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[d[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[e]+"CancelAnimationFrame"]||window[d[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){b=b;var d=(new Date).getTime(),e=Math.max(0,16-(d-c)),f=window.setTimeout(function(){a(d+e)},e);return c=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),b.prototype.query=function(b,c){var d,e=Object.getPrototypeOf(a);b&&"number"!=typeof b?d=b.length:(b=e.nodes,d=e.nodesLength);var f,g=[],h=[];for(f=0;d>f;f++){g.push(b[f].offsetWidth);try{h.push(e.sortObj(b[f].getAttribute("data-eq-pts")))}catch(i){h.push({})}}e.widths=g,e.points=h,b&&"number"!=typeof b?e.nodeWrites(b,g,h):c?e.nodeWrites():window.requestAnimationFrame(e.nodeWrites)},b.prototype.nodeWrites=function(b){var c,d,e=Object.getPrototypeOf(a),f=e.widths,g=e.points;for(b&&"number"!=typeof b?d=b.length:(b=e.nodes,d=e.nodesLength),c=0;d>c;c++){var h=f[c],i=b[c],j=g[c],k=Object.keys(j),l=k.length,m=k[0],n=k[l-1];if(h<j[m])i.removeAttribute("data-eq-state");else if(h>=j[n])i.setAttribute("data-eq-state",n);else for(var o=0;l>o;o++){var p=k[o],q=k[o+1];if(0===o&&h<j[p]){i.removeAttribute("data-eq-state");break}if(void 0===q){i.setAttribute("data-eq-state",p);break}if(h>=j[p]&&h<j[q]){i.setAttribute("data-eq-state",p);break}}}},b.prototype.refreshNodes=function(){var b=Object.getPrototypeOf(a);b.nodes=document.querySelectorAll("[data-eq-pts]"),b.nodesLength=b.nodes.length},b.prototype.sortObj=function(a){for(var b=[],c={},d=a.split(","),e=0;e<d.length;e++){var f=d[e].split(":");b.push({key:f[0].replace(/^\s+|\s+$/g,""),value:parseFloat(f[1])})}for(b.sort(function(a,b){return a.value-b.value}),e=0;e<b.length;e++){var g=b[e];c[g.key]=g.value}return c},a=a||new b,window.onload=function(){a.refreshNodes(),a.query(void 0,!0)},window.onresize=function(){a.refreshNodes(),window.requestAnimationFrame(a.query)},"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.eqjs=a}(window.eqjs);