!function(a){"use strict";function b(){this.nodes=[],this.eqsLength=0,this.widths=[],this.points=[]}function c(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(){return c.call(a,window.event)})}"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="".__proto__===String.prototype?function(a){return a.__proto__}:function(a){return a.constructor.prototype});for(var d=0,e=["webkit","moz"],f=0;f<e.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[e[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[f]+"CancelAnimationFrame"]||window[e[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){b=b;var c=(new Date).getTime(),e=Math.max(0,16-(c-d)),f=window.setTimeout(function(){a(c+e)},e);return d=c+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),b.prototype.query=function(b,c){var d,e=Object.getPrototypeOf(a);b&&"number"!=typeof b?d=b.length:(b=e.nodes,d=e.nodesLength);var f,g=[],h=[];for(f=0;d>f;f++){g.push(b[f].offsetWidth);try{h.push(e.sortObj(b[f].getAttribute("data-eq-pts")))}catch(i){h.push({})}}e.widths=g,e.points=h,b&&"number"!=typeof b?e.nodeWrites(b,g,h):c?e.nodeWrites():window.requestAnimationFrame(e.nodeWrites)},b.prototype.nodeWrites=function(b){var c,d,e=Object.getPrototypeOf(a),f=e.widths,g=e.points;for(b&&"number"!=typeof b?d=b.length:(b=e.nodes,d=e.nodesLength),c=0;d>c;c++){var h=f[c],i=b[c],j=g[c],k=j.length;if(h<j[0].value)i.removeAttribute("data-eq-state");else if(h>=j[k-1].value)i.setAttribute("data-eq-state",j[k-1].key);else for(var l=0;k>l;l++){var m=j[l],n=j[l+1];if(0===l&&h<m.value){i.removeAttribute("data-eq-state");break}if(void 0===n.value){i.setAttribute("data-eq-state",n.key);break}if(h>=m.value&&h<n.value){i.setAttribute("data-eq-state",m.key);break}}}},b.prototype.refreshNodes=function(){var b=Object.getPrototypeOf(a);b.nodes=document.querySelectorAll("[data-eq-pts]"),b.nodesLength=b.nodes.length},b.prototype.sortObj=function(a){for(var b=[],c=a.split(","),d=0;d<c.length;d++){var e=c[d].split(":");b.push({key:e[0].replace(/^\s+|\s+$/g,""),value:parseFloat(e[1])})}return b.sort(function(a,b){return a.value-b.value})},a=a||new b,c(window,"load",function(){a.refreshNodes(),a.query(void 0,!0)}),c(window,"resize",function(){a.refreshNodes(),window.requestAnimationFrame(a.query)}),"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.eqjs=a}(window.eqjs);